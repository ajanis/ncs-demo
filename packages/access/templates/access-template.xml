<config-template xmlns="http://tail-f.com/ns/config/1.0" servicepoint="access">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <name>{/device}</name>
      <config>
        <policer xmlns="urn:ios">
          <aggregate>
            <name>{/customer-name}-pol</name>
            <cir>2000000</cir>
            <bc>375000</bc>
            <conform-action/>
            <transmit/>
            <exceed-action/>
            <drop/>
          </aggregate>
        </policer>
        <policy-map xmlns="urn:ios">
          <name>{/customer-name}</name>
          <class-default>
            <class>
              <name>class-default</name>
              <police-aggregate>
                <police>
                  <aggregate>{/customer-name}-pol</aggregate>
                </police>
              </police-aggregate>
            </class>
          </class-default>
        </policy-map>
        <vlan xmlns="urn:ios">
          <internal>
            <allocation>
              <policy>ascending</policy>
            </allocation>
          </internal>
          <dot1q>
            <tag>
              <native/>
            </tag>
          </dot1q>
          <vlan-list>
            <id>{/vlan}</id>
            <name>{/customer-name}</name>
          </vlan-list>
        </vlan>
        <interface xmlns="urn:ios">
          <{/access-interface-type}>
            <name>{/access-interface-id}</name>
            <description>{/customer-name}</description>
            <switchport>
              <access>
                <vlan>{/vlan}</vlan>
              </access>
            </switchport>
            <media-type>rj45</media-type>
            <mdix>
              <auto>false</auto>
            </mdix>
            <ethernet>
              <cfm>
                <interface>false</interface>
              </cfm>
            </ethernet>
            <speed>100</speed>
            <duplex>full</duplex>
            <snmp>
              <trap>
                <link-status>false</link-status>
              </trap>
            </snmp>
            <ip>
              <no-address>
                <address>false</address>
              </no-address>
            </ip>
            <service-policy>
              <input>{/customer-name}</input>
            </service-policy>
            <storm-control>
              <broadcast>
                <level>1.0</level>
              </broadcast>
            </storm-control>
          </{/access-interface-type}>
          <GigabitEthernet>
            <name>{substring(/trunk-interface, 16)}</name>
            <port-type>nni</port-type>
            <switchport>
              <mode>
                <trunk/>
              </mode>
              <trunk>
                <allowed>
                  <vlan>
                    <vlans>{/vlan}</vlans>
                  </vlan>
                </allowed>
              </trunk>
            </switchport>
            <udld>
              <port>
                <aggressive/>
              </port>
            </udld>
          </GigabitEthernet>
        </interface>
      </config>
    </device>
  </devices>
</config-template>

